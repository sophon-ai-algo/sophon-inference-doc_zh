

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sophon Inference Installation &mdash; SophonInference  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Crash Course" href="../2_crash_course.html" />
    <link rel="prev" title="Sophon Inference" href="si.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> SophonInference
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../0_get_start.html">Getting Started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../0_products.html">Sophon TPU Choices</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../1_introduction.html">Sophon Software Stack</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="deploy.html">Model deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="bmnnsdk.html">BMNNSDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="si.html">Sophon Inference</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Sophon Inference Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#get-bmnnsdk-and-choose-link-libraries">Get BMNNSDK and Choose Link Libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-offline-tools">Install Offline Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-runtime-tools">Install Runtime Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../2_crash_course.html">Crash Course</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../1_demo.html">Practical Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../2_module.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SophonInference</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../0_get_start.html">Getting Started</a> &raquo;</li>
        
          <li><a href="../1_introduction.html">Sophon Software Stack</a> &raquo;</li>
        
      <li>Sophon Inference Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/get_start/intros/install.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sophon-inference-installation">
<h1>Sophon Inference Installation<a class="headerlink" href="#sophon-inference-installation" title="Permalink to this headline">¶</a></h1>
<p>In the section of “1.1 Sophon TPU Choices”, we introduced four kinds of Sophon TPU products: SC, SE, SA, SM.
SM serials are customized, which we will not mention in this article.
SC serials are PCIE accelerators working on x86 platform.
SE and SA serials are all SOC accelerators working on ARM platform.
In SOC mode, operating system is running on the TPU memory, and schelued by the ARM core on TPU itself.</p>
<p>For the model deployment on SE and SA products,
driving TPU to do inference is running on it,
while the procedure of converting original models to bmodels are excecuted on x86 servers.
And the runtime libs like BMDriver, BMRuntime, BMCV, BMdecoder are all pre-installed on SE and SA products,
so, we only introduce the installation of BMMNSDK on x86 servers.
If you want to deploy your application on SE and SA products finally,
the installation of offline-tools in BMMNSDK is just the all you need to know.</p>
<div class="section" id="get-bmnnsdk-and-choose-link-libraries">
<h2>Get BMNNSDK and Choose Link Libraries<a class="headerlink" href="#get-bmnnsdk-and-choose-link-libraries" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>BMNNSDK is released as a tarfile, which names as bmnnsdk2-bm1684_vx.x.x.tar.gz.
bmnnsdk2 means that it is the second version serials.
bm1684 represents the suitable chip version.
x.x.x is the detailed version tag.
We use ${BMNNSDK} as the root folder of BMNNSDK after uncompression.</p>
<p>Correct libraries should be choosen according to the kernel version of your system.
So, a script named “install_lib.sh” should be executed once you uncomress the BMNNSDK.</p>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="si">${</span><span class="nv">BMNNSDK</span><span class="si">}</span>/scripts/
./install_lib.sh nntc
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="install-offline-tools">
<h2>Install Offline Tools<a class="headerlink" href="#install-offline-tools" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>In the section of “1.2.2 BMNNSDK”, we introduced all softwares in BMNNSDK.
Offline tools includes Quantization &amp; Calibration tool and BMCompilers.
A script which should be executed once you open a new terminal is supplied for you to install all the offline tools.</p>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="si">${</span><span class="nv">BMNNSDK</span><span class="si">}</span>/scripts/
<span class="nb">source</span> envsetup_pcie.sh
</pre></div>
</div>
</div></blockquote>
<p>Attention that, there are many dependencies for BMCompilers.
If you only want one of the BMCompilers(bmnetc/t/m/p) or Quantization &amp; Calibration tool,
just install one of them is OK.</p>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="si">${</span><span class="nv">BMNNSDK</span><span class="si">}</span>/scripts
<span class="c1"># intall Quantization &amp; Calibration tool</span>
<span class="nb">source</span> envsetup_pcie.sh ufw
<span class="c1"># install bmnett</span>
<span class="nb">source</span> envsetup_pcie.sh bmnett
<span class="c1"># install bmnetc</span>
<span class="nb">source</span> envsetup_pcie.sh bmnetc
<span class="c1"># install bmnetm</span>
<span class="nb">source</span> envsetup_pcie.sh bmnetm
<span class="c1"># install bmnetp</span>
<span class="nb">source</span> envsetup_pcie.sh bmnetp
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="install-runtime-tools">
<h2>Install Runtime Tools<a class="headerlink" href="#install-runtime-tools" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The runtime libraries to be installed are BMDriver and Sophon Inference by now.
The installation of BMDriver needs root’s priority.
BMDriver will be compiler based on your kernel source and installed on system kernel after follow commands.</p>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="si">${</span><span class="nv">BMNNSDK</span><span class="si">}</span>/scripts/
sudo ./install_driver_pcie.sh
</pre></div>
</div>
</div></blockquote>
<p>Install sophon inference:</p>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="si">${</span><span class="nv">BMNNSDK</span><span class="si">}</span>/examples/sail/x86/
pip3 install sophon-x.x.x-py3-none-any.whl --user
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../2_crash_course.html" class="btn btn-neutral float-right" title="Crash Course" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="si.html" class="btn btn-neutral float-left" title="Sophon Inference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Sophon

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>